    // Función para gestionar el formulario del widget en el backend
    public function form( $instance ) {
        $selected_product = isset( $instance['selected_product'] ) ? $instance['selected_product'] : 0;
        ?>
        <p>
            <label for="<?php echo $this->get_field_id( 'selected_product' ); ?>">Selecciona un producto de WooCommerce:</label>
            <select class="widefat" id="<?php echo $this->get_field_id( 'selected_product' ); ?>" name="<?php echo $this->get_field_name( 'selected_product' ); ?>">
                <?php
                // Obtén la lista de productos de WooCommerce
                $products = wc_get_products( array( 'limit' => -1 ) );
                foreach ( $products as $product ) {
                    echo '<option value="' . esc_attr( $product->get_id() ) . '" ' . selected( $selected_product, $product->get_id() ) . '>' . esc_html( $product->get_name() ) . '</option>';
                }
                ?>
            </select>
        </p>
        <?php
    }

    // Función para guardar la configuración del widget
    public function update( $new_instance, $old_instance ) {
        $instance = array();
        $instance['selected_product'] = ( ! empty( $new_instance['selected_product'] ) ) ? intval( $new_instance['selected_product'] ) : 0;
        return $instance;
    }
}
