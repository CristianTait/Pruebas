 // Función para gestionar el formulario del widget en el backend
    public function form($instance) {
        $selected_category = isset($instance['selected_category']) ? $instance['selected_category'] : 0;
        ?>
        <p>
            <label for="<?php echo $this->get_field_id('selected_category'); ?>">Selecciona una categoría de productos de WooCommerce:</label>
            <select class="widefat" id="<?php echo $this->get_field_id('selected_category'); ?>"
                    name="<?php echo $this->get_field_name('selected_category'); ?>">
                <?php
                // Obtiene la lista de categorías de productos de WooCommerce
                $product_categories = get_terms('product_cat', array('hide_empty' => false));
                foreach ($product_categories as $category) {
                    echo '<option value="' . esc_attr($category->term_id) . '" ' . selected($selected_category, $category->term_id) . '>' . esc_html($category->name) . '</option>';
                }
                ?>
            </select>
        </p>
        <?php
    }
